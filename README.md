# Digital Piano
## Submitted by: Vishrut Sharma

## Note:
Please install the following libraries before running main.py
```
pip install sounddevice
pip install pygame
pip install pygame-menu -U
```

## Description:
This project is a Digital Piano which simulates the notes of a Piano. It has 8 keys which are mapped to the notes in the
A4 minor scale of a Piano. By pressing keys from A-K the corresponding notes will be played:

* A - A4
* S - B4
* D - C4
* F - D4
* G - E4
* H - F4
* J - G4
* K - A5

The application provides the following modes that the user can change to:

* Regular Piano: The user can play the notes without any effects.
* Karplus-Strong: The user can play the notes with the Karplus-Strong algorithm which simulates the sound of a guitar.
* Reverb: The user can play the notes with a reverb effect.
* Echo: The user can play the notes with an echo effect.
* Pitch Shift (Low): The user can play the notes with a low pitch shift effect.
* Pitch Shift (High): The user can play the notes with a high pitch shift effect.

The piano notes are generated by first getting the frequency from the key press by the user and then generating 1 sine
wave with the given frequency and 2 others which are 1.5 times and 0.5 times of the provided frequency respectively.
And then all 3 waves are combined and then the ADSR (Attack, Decay, Sustain, Release) envelope is applied to it. Bart's 
suggestion to the project proposal gave me the idea to combine 3 sine waves with 3 different but close to each other 
frequencies to make the sound more realistic. It still doesn't sound exactly like a piano but more like a keyboard.

I also implemented the Karplus-Strong algorithm as an effect as Bart suggested in the response to the project proposal.

I had some issues with the Reverb effect in the beginning and just couldn't get the reverb correct and the sound produced 
would just be too loud, so I decided to take a look at the class repository and implemented the reverb effect using the 
code from the repository and the effect improved significantly.

One issue that still persists is the delay between key press and the sound produced. I tried to reduce the latency slightly
by creating the audio arrays for each key beforehand for all the effects but the latency still exists. The delay is especially
bad for the echo effect.

Another thing I would have liked to improve is that right now when a note is played it cannot be interrupted until the 
ADSR envelope is complete and if another note is played while a note is currently playing it combines both notes. 
It would have been a difficult task to be able to interrupt notes on keypress, but it would have made the application more
realistic.

## Testing:
* For `karplus_strong` and `generate_piano_note`, I tested that the functions return an array of length equal to the sample
rate times the duration of the note.  
* For `generate_reverb`, `generate_echo`, and `pitch_shift`, I tested that the functions return an array equal to the length
of the input array.

All the tests are present in the `test.py` file.